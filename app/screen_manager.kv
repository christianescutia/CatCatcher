ScreenManager:
    HomeScreen:
    LoginScreen:
    RegisterScreen:
    UserMainScreen:
    InfoScreen:

<HomeScreen>:
    name: "home_screen"
    MDCard:
        size_hint: None, None
        size: 700, 1000
        pos_hint: { "center_x": 0.5, "center_y": 0.5}
        elevation: 10
        padding: 50
        spacing: 50
        orientation: "vertical"

        MDIcon:
            id: app_icon
            icon: "cat"
            font_size: 160
            padding_x: 220
    
        MDLabel:
            id: welcome_label
            text: "Welcome to Cat Catcher"
            font_size: 100
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
            padding_y: 40

        MDRoundFlatButton:
            text: 'Login'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.manager.current = 'login_screen'

        MDRoundFlatButton:
            text: 'Register'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.manager.current = 'register_screen'
        
        MDRoundFlatButton:
            text: 'Info'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.manager.current = 'info_screen'

<LoginScreen>:
    name: "login_screen"
    MDCard:
        size_hint: None, None
        size: 700, 1000
        pos_hint: { "center_x": 0.5, "center_y": 0.5}
        elevation: 10
        padding: 50
        spacing: 30
        orientation: "vertical"

        MDIcon:
            id: app_icon
            icon: "cat"
            font_size: 140
            padding_x: 175
    
        MDLabel:
            id: welcome_label
            text: "Login"
            font_size: 80
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
            padding_y: 20
        
        MDLabel:
            id: error_label
            text: "   "
            font_size: 40
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
    
        MDTextFieldRound:
            id: user
            hint_text: "username"
            icon_right: "account"
            size_hint_x: None
            width: 400
            font_size: 32
            pos_hint: { "center_x": 0.5 }

        MDTextFieldRound:
            id: password
            hint_text: "password"
            icon_right: "eye-off"
            size_hint_x: None
            width: 400
            font_size: 32
            pos_hint: { "center_x": 0.5 }
            password: True

        MDRoundFlatButton:
            text: 'Login'
            font_size: 24
            pos_hint: { "center_x": 0.5 }
            on_press:
                if root.login(): print("Login Success"); root.manager.current = 'user_main_screen'
                else: print('Login Fail')
        
        MDRoundFlatButton:
            text: 'Clear'
            font_size: 24
            pos_hint: { "center_x": 0.5 }
            on_press: root.clear()
        
        MDRoundFlatButton:
            text: 'Back'
            font_size: 24
            pos_hint: { "center_x": 0.5 }
            on_press: root.clear()
            on_press: root.manager.current = 'home_screen'

<RegisterScreen>:
    name: "register_screen"
    MDCard:
        size_hint: None, None
        size: 700, 1000
        pos_hint: { "center_x": 0.5, "center_y": 0.5}
        elevation: 10
        padding: 20
        spacing: 20
        orientation: "vertical"
    
        MDLabel:
            id: welcome_label
            text: "Register"
            font_size: 80
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]

        MDLabel:
            id: error_label
            text: "test"
            font_size: 40
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
    
        MDTextFieldRound:
            id: user
            hint_text: "username"
            icon_right: "account"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }

        MDTextFieldRound:
            id: email
            hint_text: "email"
            icon_right: "mail"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }

        MDTextFieldRound:
            id: phone_num
            hint_text: "phone number"
            icon_right: "phone"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }

        MDTextFieldRound:
            id: password
            hint_text: "password"
            icon_right: "eye-off"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            password: False
        
        MDTextFieldRound:
            id: password_confirm
            hint_text: "password"
            icon_right: "eye-off"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            password: False

        MDRoundFlatButton:
            text: 'Register'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: print('register button pressed...')
            on_press: root.register_user()
        
        MDRoundFlatButton:
            text: 'Clear'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.clear()
        
        MDRoundFlatButton:
            text: 'Back'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.manager.current = 'home_screen'
            on_press: root.reset()

<UserMainScreen>:
    name: "user_main_screen"
    MDCard:
        size_hint: None, None
        size: 700, 1000
        pos_hint: { "center_x": 0.5, "center_y": 0.5}
        elevation: 10
        padding: 20
        spacing: 20
        orientation: "vertical"
        
        MDList:
            id: cage_container

        MDLabel:
            id: info_label
            text: "Click Refresh to Show All Registered Cages \n Enter Any Cage Id below and click Submit to ask for notifications or instant report"
            font_size: 30
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
        
        MDTextFieldRound:
            id: box_noti_on
            hint_text: "BoxID - notify me"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }

        MDTextFieldRound:
            id: box_noti_off
            hint_text: "BoxID - notify off"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }
        
        MDRoundFlatButton:
            text: 'Submit'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.notificationCheck()

        MDTextFieldRound:
            id: insta_report
            hint_text: "BoxID - InstaReport"
            size_hint_x: None
            width: 400
            font_size: 40
            pos_hint: { "center_x": 0.5 }
        
        MDRoundFlatButton:
            text: 'Submit'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.InstaCheck()
        
        MDRoundFlatButton:
            text: 'Refresh'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.refresh()
        
        MDRoundFlatButton:
            text: 'Logout'
            font_size: 40
            pos_hint: { "center_x": 0.5 }
            on_press: root.logout()
            on_press: root.manager.current = 'home_screen'


<InfoScreen>:
    name: "info_screen"
    MDCard:
        size_hint: None, None
        size: 700, 1000
        pos_hint: { "center_x": 0.5, "center_y": 0.5}
        elevation: 10
        padding: 50
        spacing: 50
        orientation: "vertical"

        MDIcon:
            id: app_icon
            icon: "cat"
            font_size: 140
            padding_x: 175
        
        MDRoundFlatButton:
            text: 'Home'
            font_size: 24
            pos_hint: { "center_x": 0.5 }
            on_press: root.manager.current = 'home_screen'